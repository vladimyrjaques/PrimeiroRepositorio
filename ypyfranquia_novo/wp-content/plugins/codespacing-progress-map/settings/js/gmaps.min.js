if("object"!==typeof window.google||!window.google.maps)throw"Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true.";
var extend_object=function(a,b){var d;if(a===b)return a;for(d in b)a[d]=b[d];return a},replace_object=function(a,b){var d;if(a===b)return a;for(d in b)void 0!=a[d]&&(a[d]=b[d]);return a},array_map=function(a,b){var d=Array.prototype.slice.call(arguments,2),c=[],g=a.length,f;if(Array.prototype.map&&a.map===Array.prototype.map)c=Array.prototype.map.call(a,function(a){callback_params=d;callback_params.splice(0,0,a);return b.apply(this,callback_params)});else for(f=0;f<g;f++)callback_params=d,callback_params.splice(0,
0,a[f]),c.push(b.apply(this,callback_params));return c},array_flat=function(a){var b=[],d;for(d=0;d<a.length;d++)b=b.concat(a[d]);return b},coordsToLatLngs=function(a,b){var d=a[0],c=a[1];b&&(d=a[1],c=a[0]);return new google.maps.LatLng(d,c)},arrayToLatLng=function(a,b){var d;for(d=0;d<a.length;d++)a[d]=0<a[d].length&&"object"==typeof a[d][0]?arrayToLatLng(a[d],b):coordsToLatLngs(a[d],b);return a},getElementById=function(a,b){a=a.replace("#","");return"jQuery"in this&&b?$("#"+a,b)[0]:document.getElementById(a)},
findAbsolutePosition=function(a){var b=0,d=0;if(a.offsetParent){do b+=a.offsetLeft,d+=a.offsetTop;while(a=a.offsetParent)}return[b,d]},GMaps=function(a){var b=document,d=function(a){if(!this)return new d(a);a.zoom=a.zoom||15;a.mapType=a.mapType||"roadmap";var g=this,f,h="bounds_changed center_changed click dblclick drag dragend dragstart idle maptypeid_changed projection_changed resize tilesloaded zoom_changed".split(" "),m=["mousemove","mouseout","mouseover"],k="el lat lng mapType width height markerClusterer enableNewStyle".split(" ");
f=a.el||a.div;var l=a.markerClusterer,q=google.maps.MapTypeId[a.mapType.toUpperCase()],n=new google.maps.LatLng(a.lat,a.lng),r=a.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},u,p={},p={zoom:this.zoom,center:n,mapTypeId:q},r={panControl:a.panControl||!0,zoomControl:a.zoomControl||!0,zoomControlOptions:{style:google.maps.ZoomControlStyle[r.style||"DEFAULT"],position:google.maps.ControlPosition[r.position||"TOP_LEFT"]},mapTypeControl:a.mapTypeControl||!0,scaleControl:a.scaleControl||!0,streetViewControl:a.streetViewControl||
!0,overviewMapControl:u||!0};this.el="string"===typeof a.el||"string"===typeof a.div?getElementById(f,a.context):f;if("undefined"===typeof this.el||null===this.el)throw"No element defined.";window.context_menu=window.context_menu||{};window.context_menu[g.el.id]={};this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.overlay_el=this.infoWindow=null;this.zoom=a.zoom;this.registered_events={};this.el.style.width=
a.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=a.height||this.el.scrollHeight||this.el.offsetHeight;google.maps.visualRefresh=a.enableNewStyle;for(f=0;f<k.length;f++)delete a[k[f]];!0!=a.disableDefaultUI&&(p=extend_object(p,r));p=extend_object(p,a);for(f=0;f<h.length;f++)delete p[h[f]];for(f=0;f<m.length;f++)delete p[m[f]];this.map=new google.maps.Map(this.el,p);l&&(this.markerClusterer=l.apply(this,[this.map]));var t=function(a,b){var c="",d=window.context_menu[g.el.id][a],
f;for(f in d)d.hasOwnProperty(f)&&(c+='<li><a id="'+a+"_"+f+'" href="#">'+d[f].title+"</a></li>");if(getElementById("gmaps_context_menu")){var h=getElementById("gmaps_context_menu");h.innerHTML=c;var c=h.getElementsByTagName("a"),k=c.length;f;for(f=0;f<k;f++){var l=c[f];google.maps.event.clearListeners(l,"click");google.maps.event.addDomListenerOnce(l,"click",function(c){c.preventDefault();d[this.id.replace(a+"_","")].action.apply(g,[b]);g.hideContextMenu()},!1)}f=findAbsolutePosition.apply(this,
[g.el]);c=f[1]+b.pixel.y-15;h.style.left=f[0]+b.pixel.x-15+"px";h.style.top=c+"px";h.style.display="block"}};this.buildContextMenu=function(a,b){if("marker"===a){b.pixel={};var c=new google.maps.OverlayView;c.setMap(g.map);c.draw=function(){var d=c.getProjection(),f=b.marker.getPosition();b.pixel=d.fromLatLngToContainerPixel(f);t(a,b)}}else t(a,b)};this.setContextMenu=function(a){window.context_menu[g.el.id][a.control]={};var c,d=b.createElement("ul");for(c in a.options)if(a.options.hasOwnProperty(c)){var f=
a.options[c];window.context_menu[g.el.id][a.control][f.name]={title:f.title,action:f.action}}d.id="gmaps_context_menu";d.style.display="none";d.style.position="absolute";d.style.minWidth="100px";d.style.background="white";d.style.listStyle="none";d.style.padding="8px";d.style.boxShadow="2px 2px 6px #ccc";b.body.appendChild(d);var h=getElementById("gmaps_context_menu");google.maps.event.addDomListener(h,"mouseout",function(a){a.relatedTarget&&this.contains(a.relatedTarget)||window.setTimeout(function(){h.style.display=
"none"},400)},!1)};this.hideContextMenu=function(){var a=getElementById("gmaps_context_menu");a&&(a.style.display="none")};k=function(b,d){google.maps.event.addListener(b,d,function(b){void 0==b&&(b=this);a[d].apply(this,[b]);g.hideContextMenu()})};for(l=0;l<h.length;l++)f=h[l],f in a&&k(this.map,f);for(l=0;l<m.length;l++)f=m[l],f in a&&k(this.map,f);google.maps.event.addListener(this.map,"rightclick",function(b){a.rightclick&&a.rightclick.apply(this,[b]);void 0!=window.context_menu[g.el.id].map&&
g.buildContextMenu("map",b)});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){var a=[],b=this.markers.length,c;for(c=0;c<b;c++)a.push(this.markers[c].getPosition());this.fitLatLngBounds(a)};this.fitLatLngBounds=function(a){for(var b=a.length,c=new google.maps.LatLngBounds,d=0;d<b;d++)c.extend(a[d]);this.map.fitBounds(c)};this.setCenter=function(a,b,c){this.map.panTo(new google.maps.LatLng(a,b));c&&c()};this.getElement=function(){return this.el};this.zoomIn=
function(a){a=a||1;this.zoom=this.map.getZoom()+a;this.map.setZoom(this.zoom)};this.zoomOut=function(a){a=a||1;this.zoom=this.map.getZoom()-a;this.map.setZoom(this.zoom)};var h=[],s;for(s in this.map)"function"!=typeof this.map[s]||this[s]||h.push(s);for(f=0;f<h.length;f++)(function(a,b,c){a[c]=function(){return b[c].apply(b,arguments)}})(this,this.map,h[f])};return d}(this);
GMaps.prototype.createControl=function(a){var b=document.createElement("div");b.style.cursor="pointer";b.style.fontFamily="Arial, sans-serif";b.style.fontSize="13px";b.style.boxShadow="rgba(0, 0, 0, 0.398438) 0px 2px 4px";for(var d in a.style)b.style[d]=a.style[d];a.id&&(b.id=a.id);a.classes&&(b.className=a.classes);a.content&&(b.innerHTML=a.content);for(var c in a.events)(function(b,c){google.maps.event.addDomListener(b,c,function(){a.events[c].apply(this,[this])})})(b,c);b.index=1;return b};
GMaps.prototype.addControl=function(a){var b=google.maps.ControlPosition[a.position.toUpperCase()];delete a.position;a=this.createControl(a);this.controls.push(a);this.map.controls[b].push(a);return a};
GMaps.prototype.createMarker=function(a){if(void 0==a.lat&&void 0==a.lng&&void 0==a.position)throw"No latitude or longitude defined.";var b=this,d=a.details,c=a.fences,g=a.outside,f={position:new google.maps.LatLng(a.lat,a.lng),map:null};delete a.lat;delete a.lng;delete a.fences;delete a.outside;var f=extend_object(f,a),h=new google.maps.Marker(f);h.fences=c;if(a.infoWindow)for(h.infoWindow=new google.maps.InfoWindow(a.infoWindow),f=["closeclick","content_changed","domready","position_changed","zindex_changed"],
c=0;c<f.length;c++)(function(b,c){a.infoWindow[c]&&google.maps.event.addListener(b,c,function(b){a.infoWindow[c].apply(this,[b])})})(h.infoWindow,f[c]);for(var f="animation_changed clickable_changed cursor_changed draggable_changed flat_changed icon_changed position_changed shadow_changed shape_changed title_changed visible_changed zindex_changed".split(" "),m="dblclick drag dragend dragstart mousedown mouseout mouseover mouseup".split(" "),c=0;c<f.length;c++)(function(b,c){a[c]&&google.maps.event.addListener(b,
c,function(){a[c].apply(this,[this])})})(h,f[c]);for(c=0;c<m.length;c++)(function(b,c,d){a[d]&&google.maps.event.addListener(c,d,function(c){c.pixel||(c.pixel=b.getProjection().fromLatLngToPoint(c.latLng));a[d].apply(this,[c])})})(this.map,h,m[c]);google.maps.event.addListener(h,"click",function(){this.details=d;a.click&&a.click.apply(this,[this]);h.infoWindow&&(b.hideInfoWindows(),h.infoWindow.open(b.map,h))});google.maps.event.addListener(h,"rightclick",function(c){c.marker=this;a.rightclick&&a.rightclick.apply(this,
[c]);void 0!=window.context_menu[b.el.id].marker&&b.buildContextMenu("marker",c)});h.fences&&google.maps.event.addListener(h,"dragend",function(){b.checkMarkerGeofence(h,function(a,b){g(a,b)})});return h};
GMaps.prototype.addMarker=function(a){if(!a.hasOwnProperty("gm_accessors_"))if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position)a=this.createMarker(a);else throw"No latitude or longitude defined.";a.setMap(this.map);this.markerClusterer&&this.markerClusterer.addMarker(a);this.markers.push(a);GMaps.fire("marker_added",a,this);return a};GMaps.prototype.addMarkers=function(a){for(var b=0,d;d=a[b];b++)this.addMarker(d);return this.markers};
GMaps.prototype.hideInfoWindows=function(){for(var a=0,b;b=this.markers[a];a++)b.infoWindow&&b.infoWindow.close()};GMaps.prototype.removeMarker=function(a){for(var b=0;b<this.markers.length;b++)if(this.markers[b]===a){this.markers[b].setMap(null);this.markers.splice(b,1);this.markerClusterer&&this.markerClusterer.removeMarker(a);GMaps.fire("marker_removed",a,this);break}return a};
GMaps.prototype.removeMarkers=function(a){a=a||this.markers;for(var b=0;b<this.markers.length;b++)this.markers[b]===a[b]&&this.markers[b].setMap(null);a=[];for(b=0;b<this.markers.length;b++)null!=this.markers[b].getMap()&&a.push(this.markers[b]);this.markers=a};
GMaps.prototype.drawOverlay=function(a){var b=new google.maps.OverlayView,d=!0;b.setMap(this.map);null!=a.auto_show&&(d=a.auto_show);b.onAdd=function(){var c=document.createElement("div");c.style.borderStyle="none";c.style.borderWidth="0px";c.style.position="absolute";c.style.zIndex=100;c.innerHTML=a.content;b.el=c;a.layer||(a.layer="overlayLayer");var d=["contextmenu","DOMMouseScroll","dblclick","mousedown"];this.getPanes()[a.layer].appendChild(c);for(var f=0;f<d.length;f++)(function(a,b){google.maps.event.addDomListener(a,
b,function(a){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()})})(c,d[f]);google.maps.event.trigger(this,"ready")};b.draw=function(){var c=this.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));a.horizontalOffset=a.horizontalOffset||0;a.verticalOffset=a.verticalOffset||0;var g=b.el,f=g.children[0],h=f.clientHeight,f=f.clientWidth;switch(a.verticalAlign){case "top":g.style.top=c.y-h+a.verticalOffset+
"px";break;default:case "middle":g.style.top=c.y-h/2+a.verticalOffset+"px";break;case "bottom":g.style.top=c.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case "left":g.style.left=c.x-f+a.horizontalOffset+"px";break;default:case "center":g.style.left=c.x-f/2+a.horizontalOffset+"px";break;case "right":g.style.left=c.x+a.horizontalOffset+"px"}g.style.display=d?"block":"none";d||a.show.apply(this,[g])};b.onRemove=function(){var c=b.el;a.remove?a.remove.apply(this,[c]):(b.el.parentNode.removeChild(b.el),
b.el=null)};this.overlays.push(b);return b};GMaps.prototype.removeOverlay=function(a){for(var b=0;b<this.overlays.length;b++)if(this.overlays[b]===a){this.overlays[b].setMap(null);this.overlays.splice(b,1);break}};GMaps.prototype.removeOverlays=function(){for(var a=0,b;b=this.overlays[a];a++)b.setMap(null);this.overlays=[]};
GMaps.prototype.drawPolyline=function(a){var b=[],d=a.path;if(d.length)if(void 0===d[0][0])b=d;else for(var c=0,g;g=d[c];c++)b.push(new google.maps.LatLng(g[0],g[1]));b={map:this.map,path:b,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(b.clickable=a.clickable);a.hasOwnProperty("editable")&&(b.editable=a.editable);a.hasOwnProperty("icons")&&(b.icons=a.icons);a.hasOwnProperty("zIndex")&&
(b.zIndex=a.zIndex);b=new google.maps.Polyline(b);d="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");for(c=0;c<d.length;c++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})})(b,d[c]);this.polylines.push(b);GMaps.fire("polyline_added",b,this);return b};
GMaps.prototype.removePolyline=function(a){for(var b=0;b<this.polylines.length;b++)if(this.polylines[b]===a){this.polylines[b].setMap(null);this.polylines.splice(b,1);GMaps.fire("polyline_removed",a,this);break}};GMaps.prototype.removePolylines=function(){for(var a=0,b;b=this.polylines[a];a++)b.setMap(null);this.polylines=[]};
GMaps.prototype.drawCircle=function(a){a=extend_object({map:this.map,center:new google.maps.LatLng(a.lat,a.lng)},a);delete a.lat;delete a.lng;for(var b=new google.maps.Circle(a),d="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),c=0;c<d.length;c++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})})(b,d[c]);this.polygons.push(b);return b};
GMaps.prototype.drawRectangle=function(a){a=extend_object({map:this.map},a);var b=new google.maps.LatLngBounds(new google.maps.LatLng(a.bounds[0][0],a.bounds[0][1]),new google.maps.LatLng(a.bounds[1][0],a.bounds[1][1]));a.bounds=b;for(var b=new google.maps.Rectangle(a),d="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),c=0;c<d.length;c++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})})(b,d[c]);this.polygons.push(b);return b};
GMaps.prototype.drawPolygon=function(a){var b=!1;a.hasOwnProperty("useGeoJSON")&&(b=a.useGeoJSON);delete a.useGeoJSON;a=extend_object({map:this.map},a);!1==b&&(a.paths=[a.paths.slice(0)]);0<a.paths.length&&0<a.paths[0].length&&(a.paths=array_flat(array_map(a.paths,arrayToLatLng,b)));for(var b=new google.maps.Polygon(a),d="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),c=0;c<d.length;c++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,
[b])})})(b,d[c]);this.polygons.push(b);GMaps.fire("polygon_added",b,this);return b};GMaps.prototype.removePolygon=function(a){for(var b=0;b<this.polygons.length;b++)if(this.polygons[b]===a){this.polygons[b].setMap(null);this.polygons.splice(b,1);GMaps.fire("polygon_removed",a,this);break}};GMaps.prototype.removePolygons=function(){for(var a=0,b;b=this.polygons[a];a++)b.setMap(null);this.polygons=[]};
GMaps.prototype.getFromFusionTables=function(a){var b=a.events;delete a.events;a=new google.maps.FusionTablesLayer(a);for(var d in b)(function(a,d){google.maps.event.addListener(a,d,function(a){b[d].apply(this,[a])})})(a,d);this.layers.push(a);return a};GMaps.prototype.loadFromFusionTables=function(a){a=this.getFromFusionTables(a);a.setMap(this.map);return a};
GMaps.prototype.getFromKML=function(a){var b=a.url,d=a.events;delete a.url;delete a.events;a=new google.maps.KmlLayer(b,a);for(var c in d)(function(a,b){google.maps.event.addListener(a,b,function(a){d[b].apply(this,[a])})})(a,c);this.layers.push(a);return a};GMaps.prototype.loadFromKML=function(a){a=this.getFromKML(a);a.setMap(this.map);return a};
GMaps.prototype.addLayer=function(a,b){b=b||{};var d;switch(a){case "weather":this.singleLayers.weather=d=new google.maps.weather.WeatherLayer;break;case "clouds":this.singleLayers.clouds=d=new google.maps.weather.CloudLayer;break;case "traffic":this.singleLayers.traffic=d=new google.maps.TrafficLayer;break;case "transit":this.singleLayers.transit=d=new google.maps.TransitLayer;break;case "bicycling":this.singleLayers.bicycling=d=new google.maps.BicyclingLayer;break;case "panoramio":this.singleLayers.panoramio=
d=new google.maps.panoramio.PanoramioLayer;d.setTag(b.filter);delete b.filter;b.click&&google.maps.event.addListener(d,"click",function(a){b.click(a);delete b.click});break;case "places":this.singleLayers.places=d=new google.maps.places.PlacesService(this.map);if(b.search||b.nearbySearch){var c={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.search&&d.search(c,b.search);b.nearbySearch&&d.nearbySearch(c,
b.nearbySearch)}b.textSearch&&d.textSearch({bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null},b.textSearch)}if(void 0!==d)return"function"==typeof d.setOptions&&d.setOptions(b),"function"==typeof d.setMap&&d.setMap(this.map),d};
GMaps.prototype.removeLayer=function(a){if("string"==typeof a&&void 0!==this.singleLayers[a])this.singleLayers[a].setMap(null),delete this.singleLayers[a];else for(var b=0;b<this.layers.length;b++)if(this.layers[b]===a){this.layers[b].setMap(null);this.layers.splice(b,1);break}};var travelMode,unitSystem;
GMaps.prototype.getRoutes=function(a){switch(a.travelMode){case "bicycling":travelMode=google.maps.TravelMode.BICYCLING;break;case "transit":travelMode=google.maps.TravelMode.TRANSIT;break;case "driving":travelMode=google.maps.TravelMode.DRIVING;break;default:travelMode=google.maps.TravelMode.WALKING}unitSystem="imperial"===a.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var b=extend_object({avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},a);b.origin=/string/.test(typeof a.origin)?
a.origin:new google.maps.LatLng(a.origin[0],a.origin[1]);b.destination=/string/.test(typeof a.destination)?a.destination:new google.maps.LatLng(a.destination[0],a.destination[1]);b.travelMode=travelMode;b.unitSystem=unitSystem;delete b.callback;delete b.error;var d=this;(new google.maps.DirectionsService).route(b,function(b,g){if(g===google.maps.DirectionsStatus.OK){for(var f in b.routes)b.routes.hasOwnProperty(f)&&d.routes.push(b.routes[f]);a.callback&&a.callback(d.routes)}else a.error&&a.error(b,
g)})};GMaps.prototype.removeRoutes=function(){this.routes=[]};
GMaps.prototype.getElevations=function(a){a=extend_object({locations:[],path:!1,samples:256},a);0<a.locations.length&&0<a.locations[0].length&&(a.locations=array_flat(array_map([a.locations],arrayToLatLng,!1)));var b=a.callback;delete a.callback;var d=new google.maps.ElevationService;a.path?d.getElevationAlongPath({path:a.locations,samples:a.samples},function(a,d){b&&"function"===typeof b&&b(a,d)}):(delete a.path,delete a.samples,d.getElevationForLocations(a,function(a,d){b&&"function"===typeof b&&
b(a,d)}))};GMaps.prototype.cleanRoute=GMaps.prototype.removePolylines;GMaps.prototype.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,callback:function(d){0<d.length&&(b.drawPolyline({path:d[d.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.callback&&a.callback(d[d.length-1]))}})};
GMaps.prototype.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,error:a.error,callback:function(b){0<b.length&&a.start&&a.start(b[b.length-1]);if(0<b.length&&a.step){var c=b[b.length-1];if(0<c.legs.length)for(var d=c.legs[0].steps,m=0,k;k=d[m];m++)k.step_number=m,a.step(k,c.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b=a.route.legs[0].steps,
d=0,c;c=b[d];d++)c.step_number=d,a.step(c)};
GMaps.prototype.drawSteppedRoute=function(a){var b=this;if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,error:a.error,callback:function(c){0<c.length&&a.start&&a.start(c[c.length-1]);if(0<c.length&&a.step){var d=c[c.length-1];if(0<d.legs.length)for(var g=d.legs[0].steps,k=0,l;l=g[k];k++)l.step_number=k,b.drawPolyline({path:l.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),
a.step(l,d.legs[0].steps.length-1)}0<c.length&&a.end&&a.end(c[c.length-1])}});else if(a.route&&0<a.route.legs.length)for(var d=a.route.legs[0].steps,c=0,g;g=d[c];c++)g.step_number=c,b.drawPolyline({path:g.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(g)};
GMaps.Route=function(a){this.origin=a.origin;this.destination=a.destination;this.waypoints=a.waypoints;this.map=a.map;this.route=a.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}).getPath()};
GMaps.Route.prototype.getRoute=function(a){var b=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:a.travelMode,waypoints:this.waypoints||[],error:a.error,callback:function(){b.route=e[0];a.callback&&a.callback.call(b)}})};GMaps.Route.prototype.back=function(){if(0<this.step_count){this.step_count--;var a=this.route.legs[0].steps[this.step_count].path,b;for(b in a)a.hasOwnProperty(b)&&this.polyline.pop()}};
GMaps.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var a=this.route.legs[0].steps[this.step_count].path,b;for(b in a)a.hasOwnProperty(b)&&this.polyline.push(a[b]);this.step_count++}};GMaps.prototype.checkGeofence=function(a,b,d){return d.containsLatLng(new google.maps.LatLng(a,b))};GMaps.prototype.checkMarkerGeofence=function(a,b){if(a.fences)for(var d=0,c;c=a.fences[d];d++){var g=a.getPosition();this.checkGeofence(g.lat(),g.lng(),c)||b(a,c)}};
GMaps.prototype.toImage=function(a){a=a||{};var b={};b.size=a.size||[this.el.clientWidth,this.el.clientHeight];b.lat=this.getCenter().lat();b.lng=this.getCenter().lng();if(0<this.markers.length)for(b.markers=[],a=0;a<this.markers.length;a++)b.markers.push({lat:this.markers[a].getPosition().lat(),lng:this.markers[a].getPosition().lng()});0<this.polylines.length&&(a=this.polylines[0],b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(a.getPath()),b.polyline.strokeColor=a.strokeColor,
b.polyline.strokeOpacity=a.strokeOpacity,b.polyline.strokeWeight=a.strokeWeight);return GMaps.staticMapURL(b)};
GMaps.staticMapURL=function(a){function b(a,b){if("#"===a[0]&&(a=a.replace("#","0x"),b)){b=parseFloat(b);b=Math.min(1,Math.max(b,0));if(0===b)return"0x00000000";b=(255*b).toString(16);1===b.length&&(b+=b);a=a.slice(0,8)+b}return a}var d=[],c,g="http://maps.googleapis.com/maps/api/staticmap";a.url&&(g=a.url,delete a.url);var g=g+"?",f=a.markers;delete a.markers;!f&&a.marker&&(f=[a.marker],delete a.marker);var h=a.styles;delete a.styles;var m=a.polyline;delete a.polyline;a.center?(d.push("center="+
a.center),delete a.center):a.address?(d.push("center="+a.address),delete a.address):a.lat?(d.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng):a.visible&&(c=encodeURI(a.visible.join("|")),d.push("visible="+c));(c=a.size)?(c.join&&(c=c.join("x")),delete a.size):c="630x300";d.push("size="+c);a.zoom||!1===a.zoom||(a.zoom=15);c=a.hasOwnProperty("sensor")?!!a.sensor:!0;delete a.sensor;d.push("sensor="+c);for(var k in a)a.hasOwnProperty(k)&&d.push(k+"="+a[k]);if(f){var l,q;for(a=0;c=
f[a];a++){l=[];c.size&&"normal"!==c.size?(l.push("size:"+c.size),delete c.size):c.icon&&(l.push("icon:"+encodeURI(c.icon)),delete c.icon);c.color&&(l.push("color:"+c.color.replace("#","0x")),delete c.color);c.label&&(l.push("label:"+c.label[0].toUpperCase()),delete c.label);q=c.address?c.address:c.lat+","+c.lng;delete c.address;delete c.lat;delete c.lng;for(k in c)c.hasOwnProperty(k)&&l.push(k+":"+c[k]);l.length||0===a?(l.push(q),l=l.join("|"),d.push("markers="+encodeURI(l))):(l=d.pop()+encodeURI("|"+
q),d.push(l))}}if(h)for(a=0;a<h.length;a++){k=[];h[a].featureType&&"all"!=h[a].featureType&&k.push("feature:"+h[a].featureType);h[a].elementType&&"all"!=h[a].elementType&&k.push("element:"+h[a].elementType);for(f=0;f<h[a].stylers.length;f++)for(var n in h[a].stylers[f]){c=h[a].stylers[f][n];if("hue"==n||"color"==n)c="0x"+c.substring(1);k.push(n+":"+c)}f=k.join("|");""!=f&&d.push("style="+f)}if(m){c=m;m=[];c.strokeWeight&&m.push("weight:"+parseInt(c.strokeWeight,10));c.strokeColor&&(h=b(c.strokeColor,
c.strokeOpacity),m.push("color:"+h));c.fillColor&&(h=b(c.fillColor,c.fillOpacity),m.push("fillcolor:"+h));h=c.path;if(h.join)for(f=0;n=h[f];f++)m.push(n.join(","));else m.push("enc:"+h);m=m.join("|");d.push("path="+encodeURI(m))}d=d.join("&");return g+d};
GMaps.prototype.addMapType=function(a,b){if(b.hasOwnProperty("getTileUrl")&&"function"==typeof b.getTileUrl){b.tileSize=b.tileSize||new google.maps.Size(256,256);var d=new google.maps.ImageMapType(b);this.map.mapTypes.set(a,d)}else throw"'getTileUrl' function required.";};GMaps.prototype.addOverlayMapType=function(a){if(a.hasOwnProperty("getTile")&&"function"==typeof a.getTile){var b=a.index;delete a.index;this.map.overlayMapTypes.insertAt(b,a)}else throw"'getTile' function required.";};
GMaps.prototype.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)};GMaps.prototype.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,{name:a.styledMapName});this.map.mapTypes.set(a.mapTypeId,b)};GMaps.prototype.setStyle=function(a){this.map.setMapTypeId(a)};
GMaps.prototype.createPanorama=function(a){a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng());this.panorama=GMaps.createPanorama(a);this.map.setStreetView(this.panorama);return this.panorama};
GMaps.createPanorama=function(a){var b=getElementById(a.el,a.context);a.position=new google.maps.LatLng(a.lat,a.lng);delete a.el;delete a.context;delete a.lat;delete a.lng;for(var d="closeclick links_changed pano_changed position_changed pov_changed resize visible_changed".split(" "),c=extend_object({visible:!0},a),g=0;g<d.length;g++)delete c[d[g]];b=new google.maps.StreetViewPanorama(b,c);for(g=0;g<d.length;g++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this)})})(b,
d[g]);return b};GMaps.prototype.on=function(a,b){return GMaps.on(a,this,b)};GMaps.prototype.off=function(a){GMaps.off(a,this)};GMaps.custom_events="marker_added marker_removed polyline_added polyline_removed polygon_added polygon_removed geolocated geolocation_failed".split(" ");GMaps.on=function(a,b,d){if(-1==GMaps.custom_events.indexOf(a))return google.maps.event.addListener(b,a,d);d={handler:d,eventName:a};b.registered_events[a]=b.registered_events[a]||[];b.registered_events[a].push(d);return d};
GMaps.off=function(a,b){-1==GMaps.custom_events.indexOf(a)?google.maps.event.clearListeners(b,a):b.registered_events[a]=[]};GMaps.fire=function(a,b,d){if(-1==GMaps.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));else if(a in d.registered_events)for(var c=d.registered_events[a],g=0;g<c.length;g++)c[g].handler.apply(d,[b])};
GMaps.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(d){a.success(d);b&&b()},function(d){a.error(d);b&&b()},a.options):(a.not_supported(),b&&b())};GMaps.geocode=function(a){this.geocoder=new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng));delete a.lat;delete a.lng;delete a.callback;this.geocoder.geocode(a,function(a,c){b(a,c)})};
google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(a){a=new google.maps.LatLngBounds;for(var b=this.getPaths(),d,c=0;c<b.getLength();c++){d=b.getAt(c);for(var g=0;g<d.getLength();g++)a.extend(d.getAt(g))}return a});
google.maps.Polygon.prototype.containsLatLng||(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;for(var b=!1,d=this.getPaths().getLength(),c=0;c<d;c++)for(var g=this.getPaths().getAt(c),f=g.getLength(),h=f-1,m=0;m<f;m++){var k=g.getAt(m),h=g.getAt(h);(k.lng()<a.lng()&&h.lng()>=a.lng()||h.lng()<a.lng()&&k.lng()>=a.lng())&&k.lat()+(a.lng()-k.lng())/(h.lng()-k.lng())*(h.lat()-k.lat())<a.lat()&&(b=!b);h=m}return b});
google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)};google.maps.Marker.prototype.setFences=function(a){this.fences=a};google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)};google.maps.Marker.prototype.getId=function(){return this.__gm_id};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),d=b.length>>>0;if(0===d)return-1;var c=0;1<arguments.length&&(c=Number(arguments[1]),c!=c?c=0:0!=c&&Infinity!=c&&-Infinity!=c&&(c=(0<c||-1)*Math.floor(Math.abs(c))));if(c>=d)return-1;for(c=0<=c?c:Math.max(d-Math.abs(c),0);c<d;c++)if(c in b&&b[c]===a)return c;return-1});